

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ãƒŸãƒ«ã‚³æ‹æ„›å ã„ã‚¬ãƒãƒ£</title>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #d4af37; --pink: #ffb6c1; --bg: #1a1a1a; --font: 'Zen Maru Gothic', sans-serif; }
        body { background: var(--bg); color: white; font-family: var(--font); margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; overflow-x: hidden; }

        .title { margin-top: 20px; font-size: 1.1rem; color: var(--gold); text-align: center; font-weight: 700; }
        .title img { width: 30px; vertical-align: middle; margin-right: 8px; border-radius: 50%; border: 1px solid var(--gold); }

        #coin-display { margin-top: 15px; background: rgba(212, 175, 55, 0.2); padding: 8px 25px; border-radius: 30px; border: 2px solid var(--gold); color: var(--gold); font-weight: bold; font-size: 1.1rem; }

        #limit-info { margin-top: 15px; text-align: center; color: var(--pink); font-size: 0.85rem; background: rgba(255,182,193,0.1); padding: 15px; border-radius: 15px; width: 85%; max-width: 320px; border: 1px solid rgba(255,182,193,0.2); }
        #countdown { font-family: monospace; font-size: 1.1rem; color: #fff; margin-top: 5px; display: block; }
        
        #premium-link { margin-top: 15px; border-top: 1px solid rgba(255,182,193,0.3); padding-top: 15px; display: none; }
        .stores-btn { display: inline-block; background: linear-gradient(to right, #d4af37, #f9f0b5); color: #5d4037; padding: 12px 20px; border-radius: 25px; text-decoration: none; font-weight: bold; font-size: 0.85rem; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }

        #gacha-container { position: relative; width: 300px; height: 350px; margin-top: 10px; }
        #gacha-machine { width: 100%; height: 100%; object-fit: contain; position: relative; z-index: 10; }

        .capsule { position: absolute; bottom: 60px; right: 40px; width: 60px; height: 60px; z-index: 100; display: none; filter: drop-shadow(0 10px 15px rgba(0,0,0,0.5)); }
        .capsule-inner { position: relative; width: 100%; height: 100%; transform-style: preserve-3d; }
        .capsule-top { position: absolute; top: 0; width: 100%; height: 50%; border-radius: 30px 30px 0 0; background: linear-gradient(135deg, rgba(255,255,255,0.5) 0%, transparent 50%), var(--cap-color, #333); border: 1px solid rgba(255,255,255,0.3); transition: all 0.5s ease-out; }
        .capsule-bottom { position: absolute; bottom: 0; width: 100%; height: 50%; border-radius: 0 0 30px 30px; background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(2px); border: 1px solid rgba(255,255,255,0.4); transition: all 0.5s ease-out; }

        .pop-out1 { display: block !important; animation: capsule-fly1 1.2s cubic-bezier(0.25, 0.1, 0.25, 1) forwards; }
        .pop-out2 { display: block !important; animation: capsule-fly2 1.2s cubic-bezier(0.25, 0.1, 0.25, 1) forwards; }
        
        @keyframes capsule-fly1 { 0% { transform: translate(0, 0) scale(0.3) rotate(0deg); } 100% { transform: translate(-130px, -120px) scale(2.2) rotate(720deg); } }
        @keyframes capsule-fly2 { 0% { transform: translate(0, 0) scale(0.3) rotate(0deg); } 100% { transform: translate(-50px, -120px) scale(2.2) rotate(-720deg); } }
        .capsule-split .capsule-top { transform: translateY(-80px) rotate(-40deg); opacity: 0; }
        .capsule-split .capsule-bottom { transform: translateY(80px) rotate(40deg); opacity: 0; }

        .btn { margin-top: 10px; padding: 18px 60px; background: linear-gradient(to bottom, #ffc0cb, #ff69b4); color: white; border: none; border-radius: 50px; font-weight: 700; font-size: 1.1rem; box-shadow: 0 5px 0 #db7093; cursor: pointer; }
        .btn:disabled { background: #666; box-shadow: 0 5px 0 #444; cursor: not-allowed; }

        #result-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); display: none; flex-direction: column; align-items: center; justify-content: flex-start; z-index: 400; padding-top: 40px; overflow-y: auto; }
        .cards-container { display: flex; gap: 10px; justify-content: center; margin-bottom: 20px; }
        .card-reveal { width: 120px; aspect-ratio: 2/3.5; border: 2px solid var(--gold); border-radius: 10px; overflow: hidden; background: black; transform: scale(0); transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .card-reveal.active { transform: scale(1); }
        .card-reveal img { width: 100%; height: 100%; object-fit: cover; }
        
        #detail { width: 90%; max-width: 350px; background: #fefcf0; color: #333; padding: 20px; border-radius: 20px; text-align: left; opacity: 0; box-sizing: border-box; margin-bottom: 30px; position: relative; }
        #detail.active { opacity: 1; transition: opacity 0.5s; }
        #miruko-msg { font-size: 0.85rem; line-height: 1.6; min-height: 100px; white-space: pre-wrap; }
        .miruko-status { color: #d44d7c; font-weight: bold; margin-bottom: 10px; display: block; border-bottom: 1px dashed #ffb6c1; padding-bottom: 5px; }

        @keyframes shake { 0%, 100% { transform: rotate(0); } 50% { transform: rotate(-3deg); } }
    </style>
</head>
<body>

    <div class="title"><img src="images/icon2.png">Love Message Gacha</div>
    <div id="coin-display">ãƒŸãƒ«ã‚³ã‚¤ãƒ³: <span id="coin-count">0</span> æš</div>

    <div id="limit-info">
        <span id="limit-text"></span>
        <div id="timer-container" style="display:none; margin-top:10px;">
            <span id="countdown">--:--:--</span>
            <div id="premium-link">
                <p style="margin:0 0 10px 0; font-size:0.8rem;">ã‚‚ã£ã¨å ã„ãŸã„ã‚ãªãŸã¸âœ¨</p>
                <a href="https://ã‚ãªãŸã®ã‚¹ãƒˆã‚¢URL" target="_blank" class="stores-btn">ã‚¬ãƒãƒ£å›ã—æ”¾é¡Œï¼æœ‰æ–™ç‰ˆã¯ã“ã¡ã‚‰ ğŸ’</a>
            </div>
        </div>
    </div>

    <div id="gacha-container">
        <img src="images/gacha.png" id="gacha-machine">
        <div id="capsule1" class="capsule"><div class="capsule-inner"><div class="capsule-top"></div><div class="capsule-bottom"></div></div></div>
        <div id="capsule2" class="capsule"><div class="capsule-inner"><div class="capsule-top"></div><div class="capsule-bottom"></div></div></div>
    </div>

    <button class="btn" id="play-btn" onclick="playGacha()">ã‚¬ãƒãƒ£ã‚’å›ã™</button>

    <div id="result-overlay">
        <div class="cards-container">
            <div class="card-reveal" id="card-box1"></div>
            <div class="card-reveal" id="card-box2"></div>
        </div>
        <div id="detail">
            <span class="miruko-status" id="miruko-status">ãƒŸãƒ«ã‚³ãŒå ã„ä¸­â€¦ğŸ¦„âœ¨</span>
            <div id="miruko-msg"></div>
            <button id="close-res-btn" onclick="closeResult()" style="display:none; width:100%; margin-top:20px; background:#ff69b4; color:white; border:none; padding:12px; border-radius:15px; font-weight:bold; cursor:pointer;">ã‚ã‚ŠãŒã¨ã†ï¼</button>
        </div>
    </div>

    <script>
        const tarotData = [
            { id: 0, name: "0. FOOL", desc: "ä»Šã¯å®Œç’§ã˜ã‚ƒãªãã¦ã„ã„æ‹âœ¨å…ˆã®ä¸å®‰ã‚ˆã‚Šã€Œå¥½ãã€ã¨ã„ã†ç´”ç²‹ãªæ°—æŒã¡ã‚’ä¿¡ã˜ã¦ã€‚å‹‡æ°—ã‚ã‚‹ä¸€æ­©ãŒã€æ€ã„ãŒã‘ãªã„å¹¸ã›ã«ç¹‹ãŒã‚Šã¾ã™ğŸŒˆ", img: "images/0.png" },
            { id: 1, name: "1. MAGICIAN", desc: "ã‚ãªãŸã®æƒ³ã„ã«ã¯ç¾å®Ÿã‚’å‹•ã‹ã™åŠ›ãŒã‚ã‚Šã¾ã™ğŸ’«é§†ã‘å¼•ãã‚ˆã‚Šç´ ç›´ãªè¨€è‘‰ã‚’ã€‚ä¼ãˆã‚‹ã“ã¨ã§ã€æ‹ã¯ã¯ã£ãã‚Šã¨å½¢ã‚’æŒã¡å§‹ã‚ã¾ã™ğŸ’Œ", img: "images/1.png" },
            { id: 2, name: "2. HIGH PRIESTESS", desc: "ç›¸æ‰‹ã®æœ¬å¿ƒã¯è¨€è‘‰ã‚ˆã‚Šæ…‹åº¦ã«è¡¨ã‚Œã¦ã„ã¾ã™ğŸŒ™ç„¦ã‚‰ãšé™ã‹ã«è¦‹å®ˆã£ã¦ã€‚ã‚ãªãŸã®ç›´æ„Ÿã¯ä»Šã€ã¨ã¦ã‚‚å†´ãˆã¦ã„ã¾ã™ğŸ•Šï¸", img: "images/2.png" },
            { id: 3, name: "3. EMPRESS", desc: "æ„›ã•ã‚Œã‚‹ã“ã¨ã‚’é æ…®ã—ãªã„ã§ğŸ’å—ã‘å–ã‚‹è¦šæ‚ŸãŒã§ããŸæ™‚ã€æ‹ã¯è‡ªç„¶ã¨æº€ãŸã•ã‚Œã¦ã„ãã¾ã™ã€‚è‡ªåˆ†ã‚’ç”˜ã‚„ã‹ã™ã®ã‚‚å¤§åˆ‡ãªæ„›ğŸ’–", img: "images/3.png" },
            { id: 4, name: "4. EMPEROR", desc: "å®‰å¿ƒã§ãã‚‹é–¢ä¿‚ã¯è‡ªåˆ†è»¸ã‹ã‚‰âœ¨ç„¡ç†ã«åˆã‚ã›ãšã€è‡ªåˆ†ã‚’å¤§åˆ‡ã«ã™ã‚‹å§¿å‹¢ãŒç›¸æ‰‹ã®ä¿¡é ¼ã‚’è‚²ã¦ã¾ã™ğŸ°", img: "images/4.png" },
            { id: 5, name: "5. HIEROPHANT", desc: "èª å®Ÿãªæƒ³ã„ã¯æ™‚é–“ã‚’ã‹ã‘ã¦å®Ÿã‚’çµã³ã¾ã™ğŸŒ¿å‘¨å›²ã®å¸¸è­˜ã‚ˆã‚Šã€å¿ƒãŒã€Œæ­£ã—ã„ã€ã¨æ„Ÿã˜ã‚‹é¸æŠã‚’ğŸ¤", img: "images/5.png" },
            { id: 6, name: "6. LOVERS", desc: "è¿·ã„ã¯æœ¬æ°—ã®è¨¼æ‹ ğŸ’å¿ƒãŒå¼·ãæƒ¹ã‹ã‚Œã‚‹æ–¹ã‚’é¸ã‚“ã§ã€‚é¸æŠã—ãŸå…ˆã§ã€ã‚ãªãŸã®æ‹ã¯æ·±ã¾ã£ã¦ã„ãã¾ã™âœ¨", img: "images/6.png" },
            { id: 7, name: "7. CHARIOT", desc: "ä»Šã¯å¾…ã¤ã‚ˆã‚Šå‹•ãæ™‚ğŸš€å°ã•ãªè¡Œå‹•ãŒå¤§ããªé€²å±•ã«ã€‚å‹‡æ°—ã‚’å‡ºã—ãŸã‚ãªãŸã«ã€æ‹ã¯å‘³æ–¹ã—ã¾ã™ğŸ”¥", img: "images/7.png" },
            { id: 8, name: "8. STRENGTH", desc: "å„ªã—ã•ã¯æœ€å¤§ã®å¼·ã•ğŸ¦ç„¡ç†ã«é ‘å¼µã‚‰ãªãã¦å¤§ä¸ˆå¤«ã€‚ã‚ãªãŸã®æ€ã„ã‚„ã‚ŠãŒã€ç›¸æ‰‹ã®å¿ƒã‚’è‡ªç„¶ã¨é–‹ãã¾ã™ğŸ’—", img: "images/8.png" },
            { id: 9, name: "9. HERMIT", desc: "ä¸€äººã®æ™‚é–“ã¯æ‹ã‚’æ•´ãˆã‚‹ãŸã‚ğŸŒ™é™ã‹ã«å‘ãåˆã†ã“ã¨ã§ã€æœ¬å½“ã«æœ›ã‚€æ„›ãŒè¦‹ãˆã¦ãã¾ã™ğŸ•¯ï¸", img: "images/9.png" },
            { id: 10, name: "10. WHEEL OF FORTUNE", desc: "æµã‚ŒãŒå¤§ããå‹•ãæ™‚ğŸ¡å¶ç„¶ã®å‡ºæ¥äº‹ã«ã“ãæ„å‘³ãŒã‚ã‚Šã¾ã™ã€‚ãƒãƒ£ãƒ³ã‚¹ã¯ã™ã§ã«å·¡ã£ã¦ãã¦ã„ã¾ã™âœ¨", img: "images/10.png" },
            { id: 11, name: "11. JUSTICE", desc: "æœ¬éŸ³ã¨è¡Œå‹•ã‚’ä¸€è‡´ã•ã›ã¦âš–ï¸èª å®Ÿãªé¸æŠã¯ã€å¾Œæ‚”ã—ãªã„æ‹ã‚’å¼•ãå¯„ã›ã¾ã™ğŸ¤", img: "images/11.png" },
            { id: 12, name: "12. HANGED MAN", desc: "ä»Šã¯å‹•ã‹ãªãã¦ã‚‚å¤§ä¸ˆå¤«ğŸŒ±å¾…ã¤æ™‚é–“ãŒæ„›ã‚’è‚²ã¦ã¦ã„ã¾ã™ã€‚è¦‹æ–¹ã‚’å¤‰ãˆã‚‹ã¨ç­”ãˆãŒè¦‹ãˆã¦ãã‚‹âœ¨", img: "images/12.png" },
            { id: 13, name: "13. DEATH", desc: "çµ‚ã‚ã‚Šã¯æ–°ã—ã„å§‹ã¾ã‚ŠğŸ–¤æ‰‹æ”¾ã—ãŸå…ˆã«ã€ã‚‚ã£ã¨å¹¸ã›ãªæ‹ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ğŸŒ¹", img: "images/13.png" },
            { id: 14, name: "14. TEMPERANCE", desc: "ç„¡ç†ã®ãªã„é–¢ä¿‚ãŒé•·ç¶šãğŸ’æ­©å¹…ã‚’åˆã‚ã›ã‚‹ã“ã¨ã§ã€å¿ƒåœ°ã‚ˆã„æ„›ã®å½¢ãŒæ•´ã„ã¾ã™ğŸŒ¸", img: "images/14.png" },
            { id: 15, name: "15. DEVIL", desc: "ãã‚Œã¯æ„›ï¼Ÿãã‚Œã¨ã‚‚åŸ·ç€ï¼ŸğŸ•¸ï¸è‹¦ã—ããªã‚‹æ‹ã¯è¦‹ç›´ã—ã¦ã€‚è‡ªç”±ãªå¿ƒãŒæœ¬å½“ã®å¹¸ã›ã‚’å‘¼ã³ã¾ã™âœ¨", img: "images/15.png" },
            { id: 16, name: "16. TOWER", desc: "è¡æ’ƒã¯çœŸå®Ÿã‚’çŸ¥ã‚‹ãŸã‚âš¡å£Šã‚ŒãŸå¹»æƒ³ã®å…ˆã«ã€å½ã‚Šã®ãªã„æ„›ãŒå¾…ã£ã¦ã„ã¾ã™ğŸŒˆ", img: "images/16.png" },
            { id: 17, name: "17. STAR", desc: "å¸Œæœ›ã‚’æ‰‹æ”¾ã•ãªã„ã§ğŸŒŸãã®æ‹ã¯ã¾ã å¯èƒ½æ€§ã«æº€ã¡ã¦ã„ã¾ã™ã€‚ä¿¡ã˜ã‚‹å¿ƒãŒæœªæ¥ã‚’ç…§ã‚‰ã—ã¾ã™ğŸ’«", img: "images/17.png" },
            { id: 18, name: "18. MOON", desc: "ä¸å®‰ã¯æ€ã„è¾¼ã¿ã‹ã‚‚ğŸŒ™ç¢ºã‹ã‚ã‚‹å‹‡æ°—ã‚’ã€‚çœŸå®Ÿã‚’çŸ¥ã‚‹ã“ã¨ã§ã€å¿ƒã¯é™ã‹ã«è½ã¡ç€ãã¾ã™ğŸ¤", img: "images/18.png" },
            { id: 19, name: "19. SUN", desc: "ç´ ç›´ãªç¬‘é¡”ãŒæ‹ã‚’è¼ã‹ã›ã¾ã™â˜€ï¸å–œã³ã‚’åˆ†ã‹ã¡åˆãˆã‚‹é–¢ä¿‚ãŒã€ã‚ãªãŸã‚’å¹¸ã›ã«ã—ã¾ã™ğŸ’›", img: "images/19.png" },
            { id: 20, name: "20. JUDGEMENT", desc: "éå»ã®æ‹ã«ç­”ãˆãŒå‡ºã‚‹æ™‚ğŸ“¯è¨±ã—ã¨æ°—ã¥ããŒã€æ–°ã—ã„æ„›ã¸ã®æ‰‰ã‚’é–‹ãã¾ã™âœ¨", img: "images/20.png" },
            { id: 21, name: "21. WORLD", desc: "å¿ƒã‹ã‚‰æº€ãŸã•ã‚Œã‚‹æ‹ãŒå®ŒæˆğŸ’ã‚ã‚Šã®ã¾ã¾ã®ã‚ãªãŸã§ã€æ„›ã•ã‚Œã‚‹å¹¸ã›ã‚’å—ã‘å–ã£ã¦ğŸŒˆ", img: "images/21.png" },
            { id: 36, name: "ACE OF CUPS", desc: "æ–°ã—ã„æ„›ã®å§‹ã¾ã‚ŠğŸ’—å¿ƒãŒè‡ªç„¶ã¨å‹•ãå‡ºä¼šã„ã‚„æ„Ÿæƒ…ãŒè¨ªã‚Šã¾ã™ã€‚æ€–ãŒã‚‰ãšã€ãã®ã¨ãã‚ãã‚’å—ã‘å–ã£ã¦ğŸŒ¸", img: "images/36.png" },
            { id: 37, name: "TWO OF CUPS", desc: "å¿ƒã¨å¿ƒãŒé€šã„åˆã†æ™‚ğŸ’•å¯¾ç­‰ãªæ„›ã€ç´ ç›´ãªæ°—æŒã¡ã®äº¤æ›ãŒæ‹ã‚’æ·±ã‚ã¾ã™ã€‚å®‰å¿ƒã—ã¦æƒ³ã„ã‚’å…±æœ‰ã—ã¦âœ¨", img: "images/37.png" },
            { id: 78, name: "ULTIMATE", desc: "ã‚ãªãŸã®æ‹ã¯ä»Šã€æœ€çµ‚æ®µéšã®æ‰‰ã®å‰ã«ã„ã¾ã™ğŸ’ã‚‚ã†ç–‘ã‚ãªãã¦å¤§ä¸ˆå¤«ã€‚ã“ã‚Œã¾ã§ã®æƒ³ã„ã¨é¸æŠã¯ã™ã¹ã¦æ­£è§£âœ¨è¦šæ‚Ÿã‚’æ±ºã‚ã¦å—ã‘å–ã‚‹ã“ã¨ã§ã€é‹å‘½ã®æ„›ãŒå®Œå…¨ã«å½¢ã«ãªã‚Šã¾ã™ğŸŒˆğŸ’–", img: "images/78.png" }
        ];

        let coins = parseInt(localStorage.getItem('miruCoins') || '1');
        let lastAccess = localStorage.getItem('lastAccessDate');

        function updateUI() {
            const today = new Date().toLocaleDateString();
            if (lastAccess !== today) {
                coins = 1; // 1æ—¥1å›ã«å¤‰æ›´
                lastAccess = today;
                localStorage.setItem('lastAccessDate', today);
                localStorage.setItem('miruCoins', coins);
            }

            document.getElementById('coin-count').innerText = coins;
            const btn = document.getElementById('play-btn');
            const limitText = document.getElementById('limit-text');
            const timerCon = document.getElementById('timer-container');
            const premiumLink = document.getElementById('premium-link');

            if (coins <= 0) {
                btn.disabled = true;
                limitText.innerText = "ä»Šæ—¥ã®åˆ†ã¯çµ‚äº†ğŸŒ™ã¾ãŸæ˜æ—¥æ¥ã¦ã­ğŸ¦„";
                timerCon.style.display = "block";
                premiumLink.style.display = "block";
            } else {
                btn.disabled = false;
                limitText.innerText = `ã‚ã¨ ${coins} å›å ãˆã‚‹ã‚ˆâœ¨`;
                timerCon.style.display = "none";
            }
        }

        setInterval(() => {
            const now = new Date();
            const tomorrow = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1);
            const diff = tomorrow - now;
            const h = Math.floor(diff / (1000 * 60 * 60)).toString().padStart(2,'0');
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2,'0');
            const s = Math.floor((diff % (1000 * 60)) / 1000).toString().padStart(2,'0');
            document.getElementById('countdown').innerText = `${h}:${m}:${s}`;
        }, 1000);

        function typeWriter(text, elementId, speed = 40) {
            let i = 0;
            const element = document.getElementById(elementId);
            element.innerHTML = "";
            return new Promise(resolve => {
                function type() {
                    if (i < text.length) {
                        element.innerHTML += text.charAt(i);
                        i++;
                        setTimeout(type, speed);
                    } else { resolve(); }
                }
                type();
            });
        }

        async function playGacha() {
            if (coins <= 0) return;
            coins--; 
            localStorage.setItem('miruCoins', coins);
            updateUI();

            const machine = document.getElementById('gacha-machine');
            const cap1 = document.getElementById('capsule1');
            const cap2 = document.getElementById('capsule2');

            [cap1, cap2].forEach(c => {
                c.classList.remove('pop-out1', 'pop-out2', 'capsule-split');
                c.style.setProperty('--cap-color', ['#ff8aae', '#a2d2ff', '#ffd700', '#b19cd9'][Math.floor(Math.random() * 4)]);
            });

            machine.style.animation = "shake 0.1s infinite";

            setTimeout(() => {
                machine.style.animation = "none";
                cap1.classList.add('pop-out1');
                setTimeout(() => cap2.classList.add('pop-out2'), 300);
            }, 600);

            setTimeout(async () => {
                cap1.classList.add('capsule-split');
                cap2.classList.add('capsule-split');

                const card1 = tarotData[Math.floor(Math.random() * tarotData.length)];
                let card2 = tarotData[Math.floor(Math.random() * tarotData.length)];
                while(card1.id === card2.id) card2 = tarotData[Math.floor(Math.random() * tarotData.length)];

                document.getElementById('card-box1').innerHTML = `<img src="${card1.img}">`;
                document.getElementById('card-box2').innerHTML = `<img src="${card2.img}">`;
                document.getElementById('miruko-msg').innerHTML = "";
                document.getElementById('miruko-status').innerText = "ãƒŸãƒ«ã‚³ãŒå ã„ä¸­â€¦ğŸ¦„âœ¨";
                document.getElementById('close-res-btn').style.display = "none";
                document.getElementById('result-overlay').style.display = "flex";

                setTimeout(() => {
                    document.getElementById('card-box1').classList.add('active');
                    document.getElementById('card-box2').classList.add('active');
                    document.getElementById('detail').classList.add('active');
                }, 100);

                // --- æ‹æ„›ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã®ãƒ¬ãƒ‘ãƒ¼ãƒˆãƒªãƒ¼å¼·åŒ– ---
                let adviceSnippet = "";
                const ids = [card1.id, card2.id];
                
                if (ids.includes(78) || ids.includes(19) || ids.includes(6)) {
                    adviceSnippet = "ãƒŸãƒ©ã‚¯ãƒ«ãŒèµ·ããã†ãªäºˆæ„Ÿï¼ä»Šã¯ã€Œæ¥½ã—ã„ï¼ã€ã¨ã„ã†ç›´æ„Ÿã‚’ä¿¡ã˜ã¦å‹•ãã®ãŒæ­£è§£ã€‚æœ€é«˜ã®çµæœãŒå¾…ã£ã¦ã„ã‚‹ã‚ˆâœ¨";
                } else if (ids.some(id => [13, 15, 16, 18].includes(id))) {
                    adviceSnippet = "ä»Šã¯å°‘ã—ãƒ‡ãƒˆãƒƒã‚¯ã‚¹ã®æ™‚æœŸã€‚ç„¦ã£ã¦ç­”ãˆã‚’å‡ºãã†ã¨ã›ãšã€ã¾ãšã¯è‡ªåˆ†ã‚’ãŸã£ã·ã‚Šç™’ã—ã¦ã‚ã’ã¦ã€‚å¤œæ›´ã‹ã—ã¯ç¦ç‰©ã ã‚ˆğŸŒ™";
                } else if (ids.some(id => [1, 7, 22, 33].includes(id))) {
                    // æƒ…ç†±ãƒ»è¡Œå‹•ç³»
                    adviceSnippet = "è¿½ã„é¢¨ãŒå¹ã„ã¦ã„ã‚‹ã‚ˆï¼ã€Œå¾…ã¤ã€ã‚ˆã‚Šã€Œè‡ªåˆ†ã‹ã‚‰å‹•ãã€ã“ã¨ã§é‹å‘½ã®æ­¯è»ŠãŒå›ã‚Šã ã™ã¯ãšã€‚å‹‡æ°—ã‚’å‡ºã—ã¦ä¸€æ­©è¸ã¿å‡ºã—ã¦ï¼ğŸ”¥";
                } else if (ids.some(id => [2, 5, 9, 12].includes(id))) {
                    // å†…çœãƒ»é™æ­¢ç³»
                    adviceSnippet = "ä»Šã¯ã€Œé™å¯‚ã€ãŒå‘³æ–¹ã—ã¦ãã‚Œã‚‹æ™‚ã€‚ç„¡ç†ã«ç­”ãˆã‚’å‡ºãã†ã¨ã—ãªãã¦å¤§ä¸ˆå¤«ã€‚è‡ªåˆ†ã®å¿ƒã¨ã‚†ã£ãã‚Šå¯¾è©±ã™ã‚‹æ™‚é–“ã‚’å¤§åˆ‡ã«ã—ã¦ã­ğŸŒ¿";
                } else if (ids.some(id => [3, 14, 36, 37].includes(id))) {
                    // æ„›æƒ…ãƒ»äº¤æµç³»
                    adviceSnippet = "æ„›ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒæº€ã¡ã¦ã„ã‚‹ã‚ˆã€‚å‘¨ã‚Šã®äººã¸ã®æ„Ÿè¬ã‚’è¨€è‘‰ã«ã—ã¦ã¿ã¦ã€‚å„ªã—ã„æ³¢å‹•ãŒã€ç´ æ•µãªç¸ã‚’å¼•ãå¯„ã›ã¦ãã‚Œã‚‹ã‹ã‚‰ã­ğŸ’–";
                } else if (ids.some(id => [4, 11, 20].includes(id))) {
                    // æ±ºæ–­ãƒ»èª å®Ÿç³»
                    adviceSnippet = "èª å®Ÿã•ãŒéµã«ãªã‚‹ã‚ˆã€‚è‡ªåˆ†ã®æœ¬éŸ³ã«å˜˜ã‚’ã¤ã‹ãªã„ã§ã€å‡›ã¨ã—ãŸæ…‹åº¦ã§ã„ã‚‹ã“ã¨ã€‚ãã®å§¿ãŒç›¸æ‰‹ã®ä¿¡é ¼ã‚’ã‚°ãƒƒã¨å¼•ãå¯„ã›ã‚‹ã‚ˆå‡›âœ¨";
                } else {
                    // ãã®ä»–
                    adviceSnippet = "äºŒã¤ã®é‹å‘½ãŒé‡ãªã‚Šåˆã£ã¦ã€æ–°ã—ã„é“ãŒè¦‹ãˆã¦ãã‚‹ã‚ˆã€‚ã‚ã‚Šã®ã¾ã¾ã®å›ã§ã„ã‚‹ã“ã¨ãŒã€æœ€é«˜ã®é­”æ³•ã«ãªã‚‹ã‹ã‚‰ã­ğŸ¦„ğŸ’–";
                }

                const finalMsg = `å¼•ã„ãŸã‚«ãƒ¼ãƒ‰ã¯ã€Œ${card1.name}ã€ã¨ã€Œ${card2.name}ã€ã ã‚ˆï¼\n\nã€ä»Šã®ã‚ãªãŸã¸ã€‘\n${card1.desc}\n\nã€æœªæ¥ã¸ã®ãƒ’ãƒ³ãƒˆã€‘\n${card2.desc}\n\nã€æ‹æ„›ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã€‘\n${adviceSnippet}`;

                await new Promise(r => setTimeout(r, 1500)); 
                document.getElementById('miruko-status').innerText = "ãƒŸãƒ«ã‚³ã®å æ–­çµæœğŸ¦„ğŸ’";
                await typeWriter(finalMsg, 'miruko-msg', 35);
                document.getElementById('close-res-btn').style.display = "block";

            }, 2000);
        }

        function closeResult() { 
            document.getElementById('result-overlay').style.display = "none"; 
            document.querySelectorAll('.card-reveal, #detail').forEach(el => el.classList.remove('active')); 
        }

        window.onload = updateUI;
    </script>
</body>
</html>
