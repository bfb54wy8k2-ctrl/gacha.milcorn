<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ãƒŸãƒ«ã‚³ãƒ¼ãƒ³ã‚¬ãƒãƒ£å ã„</title>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="icon" href="images/icon2.png" type="image/png">
    <link rel="apple-touch-icon" href="images/icon2.png">

    <style>
        :root { --gold: #d4af37; --pink: #ffb6c1; --bg: #1a1a1a; --font: 'Zen Maru Gothic', sans-serif; }
        body { background: var(--bg); color: white; font-family: var(--font); margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; overflow-x: hidden; }

        .title { margin-top: 20px; font-size: 1.2rem; color: var(--gold); text-align: center; font-weight: 700; text-shadow: 0 0 10px rgba(212, 175, 55, 0.5); }
        .title img { width: 30px; vertical-align: middle; margin-right: 8px; border-radius: 50%; border: 1px solid var(--gold); }
        .title span { display: block; font-size: 0.8rem; letter-spacing: 3px; opacity: 0.8; margin-top: 5px; }

        /* å›æ•°ãƒ»ã‚¿ã‚¤ãƒãƒ¼è¡¨ç¤ºã‚¨ãƒªã‚¢ */
        #limit-info { margin-top: 15px; text-align: center; color: var(--pink); font-size: 0.9rem; background: rgba(255,182,193,0.1); padding: 10px 20px; border-radius: 15px; border: 1px solid rgba(255,182,193,0.3); width: 85%; max-width: 300px; }
        #timer { color: #fff; font-weight: bold; font-family: monospace; display: block; margin-top: 5px; }
        #coin-message { color: #ffa0a0; font-size: 0.8rem; margin-top: 5px; display: none; line-height: 1.4; }

        /* ã‚¬ãƒãƒ£æœ¬ä½“ã®ã‚¨ãƒªã‚¢ */
        #gacha-container { position: relative; width: 320px; height: 420px; margin-top: 10px; }
        #gacha-machine { width: 100%; height: 100%; object-fit: contain; z-index: 10; position: relative; }

        /* é£›ã³å‡ºã™ã‚«ãƒ—ã‚»ãƒ«ï¼ˆåˆæœŸä½ç½®ï¼šå³ä¸‹ï¼‰ */
        #capsule {
            position: absolute; bottom: 60px; right: 40px; width: 60px; height: 60px;
            border-radius: 50%; box-shadow: 0 0 20px white;
            transform: scale(0); z-index: 5; display: none;
        }

        .pop-out { animation: capsule-pop 1.5s cubic-bezier(0.25, 1, 0.5, 1) forwards; }
        @keyframes capsule-pop {
            0% { transform: translate(0, 0) scale(0) rotate(0deg); opacity: 1; z-index: 5; }
            30% { z-index: 20; }
            50% { transform: translate(-80px, -180px) scale(2) rotate(180deg); }
            100% { transform: translate(-100px, -120px) scale(3) rotate(360deg); opacity: 1; z-index: 20; }
        }

        /* çµæœè¡¨ç¤ºã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
        #result-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); display: none; flex-direction: column;
            align-items: center; justify-content: center; z-index: 200;
        }

        .card-reveal {
            width: 220px; height: 370px; border: 3px solid var(--gold); border-radius: 15px;
            overflow: hidden; box-shadow: 0 0 40px var(--gold);
            animation: card-up 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        @keyframes card-up {
            0% { transform: scale(0) rotateY(90deg); opacity: 0; }
            100% { transform: scale(1) rotateY(0deg); opacity: 1; }
        }

        #detail { width: 85%; max-width: 350px; background: #fefcf0; color: #333; padding: 25px; border-radius: 20px; margin-top: 25px; text-align: center; }
        #card-name { color: #d44d7c; font-size: 1.2rem; margin-bottom: 10px; border-bottom: 1px dashed #ffb6c1; padding-bottom: 5px; }
        
        .btn { 
            margin-top: 20px; padding: 18px 60px; background: linear-gradient(to bottom, #ffc0cb, #ff69b4);
            color: white; border: none; border-radius: 50px; font-weight: 700; font-size: 1.1rem;
            cursor: pointer; box-shadow: 0 6px 0 #db7093; transition: 0.1s;
        }
        .btn:active { transform: translateY(3px); box-shadow: 0 3px 0 #db7093; }
        .btn:disabled { background: #666; box-shadow: 0 6px 0 #444; color: #ccc; cursor: not-allowed; }

        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            50% { transform: translate(-2px, -1px) rotate(-1deg); }
            100% { transform: translate(1px, 1px) rotate(0deg); }
        }
    </style>
</head>
<body>

    <div class="title">
        <img src="images/icon2.png" alt="icon">
        ãƒŸãƒ«ã‚³ãƒ¼ãƒ³ã®å†’é™ºã‚¿ãƒ­ãƒƒãƒˆã‚¬ãƒãƒ£
        <span>Gacha Edition</span>
    </div>

    <div id="limit-info">
        <span id="limit-text">ã“ã®ã‚¬ãƒãƒ£ã¯1æ—¥3å›ã¾ã§å¼•ã‘ã‚‹ã‚ˆğŸ¦„âœ¨</span>
        <span id="timer"></span>
        <span id="coin-message">æ—©ãå¼•ããŸã„å ´åˆã¯ãƒŸãƒ«ã‚³ã‚¤ãƒ³ãŒå¿…è¦ã ã‚ˆğŸ¦„</span>
    </div>

    <div id="gacha-container">
        <img src="images/gacha.png" id="gacha-machine" alt="ã‚¬ãƒãƒ£ã‚¬ãƒãƒ£">
        <div id="capsule"></div>
    </div>

    <button class="btn" id="play-btn" onclick="playGacha()">ã‚¬ãƒãƒ£ã‚’å›ã—ã¦å ã†</button>

    <div id="result-overlay" onclick="closeResult()">
        <div class="card-reveal" id="card-box"></div>
        <div id="detail">
            <h2 id="card-name"></h2>
            <p id="card-desc" style="white-space:pre-wrap;"></p>
            <p style="font-size:0.7rem; color:#aaa; margin-top:15px;">ã‚¿ãƒƒãƒ—ã—ã¦é–‰ã˜ã‚‹</p>
        </div>
    </div>

    <script>
        // ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿
        const tarotData = [
            { name: "0. THE FOOL", desc: "ğŸ’« æ–°ã—ã„å†’é™ºã®ã¯ã˜ã¾ã‚Š\nãƒ¯ã‚¯ãƒ¯ã‚¯ã™ã‚‹æ–¹ã‚’é¸ã‚“ã§å¤§æ­£è§£ã€‚\nä»Šã¯æ·±ãè€ƒãˆã™ããªãã¦OKã ã‚ˆã€‚", img: "images/0.png" },
            { name: "1. THE MAGICIAN", desc: "âœ¨ é¡˜ã„ãŒå‹•ãå‡ºã™ã‚¿ã‚¤ãƒŸãƒ³ã‚°\nã‚ãªãŸã®è¨€è‘‰ã‚„è¡Œå‹•ãŒã€ç¾å®Ÿã‚’å¤‰ãˆã¦ã„ãã‚ˆã€‚", img: "images/1.png" },
            { name: "2. THE HIGH PRIESTESS", desc: "ğŸŒ™ ç›´æ„Ÿã‚’ä¿¡ã˜ã¦\nç†ç”±ã¯ãªãã¦å¤§ä¸ˆå¤«ã€‚\nã€Œãªã‚“ã¨ãªãã€ã®æ„Ÿè¦šãŒå½“ãŸã£ã¦ã‚‹ã‚ˆã€‚", img: "images/2.png" },
            { name: "3. THE EMPRESS", desc: "ğŸŒ· æ„›ã¨è±Šã‹ã•ã«åŒ…ã¾ã‚Œã‚‹æ™‚\nå—ã‘å–ã‚‹ã“ã¨ã‚’é æ…®ã—ãªã„ã§ã€‚\nã‚ãªãŸã¯æ„›ã•ã‚Œã¦ã„ã„å­˜åœ¨ã€‚", img: "images/3.png" },
            { name: "4. THE EMPEROR", desc: "ğŸ‘‘ å®‰å®šã¨å®‰å¿ƒãŒæ‰‹ã«å…¥ã‚‹\nã—ã£ã‹ã‚Šã—ãŸé¸æŠãŒã€æœªæ¥ã‚’å®ˆã£ã¦ãã‚Œã‚‹ã‚ˆã€‚", img: "images/4.png" },
            { name: "5. THE HIEROPHANT", desc: "ğŸ“– å¤§åˆ‡ãªå­¦ã³ãŒã‚ã‚‹\nèª°ã‹ã®è¨€è‘‰ã‚„çµŒé¨“ãŒã€ä»Šã®ãƒ’ãƒ³ãƒˆã«ãªã‚‹ã‚ˆã€‚", img: "images/5.png" },
            { name: "6. THE LOVERS", desc: "ğŸ’– å¿ƒãŒé¸ã¶ç­”ãˆãŒæ­£è§£\nè¿·ã£ãŸã‚‰ã€æœ¬éŸ³ã‚’å¤§äº‹ã«ã—ã¦ã­ã€‚", img: "images/6.png" },
            { name: "7. THE CHARIOT", desc: "ğŸš€ ä¸€æ°—ã«å‰é€²ï¼\nå‹¢ã„ã«ä¹—ã£ã¦OKã€‚\nä»Šã®ã‚ãªãŸã¯æ­¢ã¾ã‚‰ãªã„ã€‚", img: "images/7.png" },
            { name: "8. STRENGTH", desc: "ğŸ•Š å„ªã—ã•ãŒæœ€å¤§ã®æ­¦å™¨\nç„¡ç†ã«å¼·ãŒã‚‰ãªãã¦å¤§ä¸ˆå¤«ã ã‚ˆã€‚", img: "images/8.png" },
            { name: "9. THE HERMIT", desc: "ğŸ”¦ ä¸€äººã®æ™‚é–“ãŒç­”ãˆã‚’ãã‚Œã‚‹\né™ã‹ã«è‡ªåˆ†ã¨å‘ãåˆã£ã¦ã¿ã¦ã€‚", img: "images/9.png" },
            { name: "10. WHEEL OF FORTUNE", desc: "ğŸ¡ é‹å‘½ãŒå‹•ã„ã¦ã‚‹ï¼\næµã‚ŒãŒå¤‰ã‚ã‚‹æ™‚ã€‚\nãƒãƒ£ãƒ³ã‚¹ã‚’ä¿¡ã˜ã¦ã­ã€‚", img: "images/10.png" },
            { name: "11. JUSTICE", desc: "âš– æ­£ã—ã„é¸æŠãŒã§ãã‚‹æ™‚\nèª å®Ÿã§ã„ã‚‹ã“ã¨ãŒã€ã‚ãªãŸã‚’å®ˆã‚‹ã‚ˆã€‚", img: "images/11.png" },
            { name: "12. THE HANGED MAN", desc: "â³ ä»Šã¯å¾…ã¤ã“ã¨ã‚‚å¤§åˆ‡\nè¦‹æ–¹ã‚’å¤‰ãˆã‚‹ã¨ã€ç­”ãˆãŒè¦‹ãˆã¦ãã‚‹ã‚ˆã€‚", img: "images/12.png" },
            { name: "13. DEATH", desc: "ğŸŒ± çµ‚ã‚ã‚Šï¼æ–°ã—ã„å§‹ã¾ã‚Š\næ‰‹æ”¾ã—ãŸå…ˆã«ã€ã¡ã‚ƒã‚“ã¨å¹¸ã›ãŒå¾…ã£ã¦ã‚‹ã€‚", img: "images/13.png" },
            { name: "14. TEMPERANCE", desc: "ğŸ’— å¿ƒã¨ç¾å®Ÿã®ãƒãƒ©ãƒ³ã‚¹â—\nç„¦ã‚‰ãšã€ã¡ã‚‡ã†ã©ã„ã„ãƒšãƒ¼ã‚¹ã§ã€‚", img: "images/14.png" },
            { name: "15. THE DEVIL", desc: "ğŸ”“ ãã®ä¸å®‰ã€ã‚‚ã†æ‰‹æ”¾ã›ã‚‹ã‚ˆ\næœ¬å½“ã¯ã‚ãªãŸã€è‡ªç”±ãªã‚“ã ã€‚", img: "images/15.png" },
            { name: "16. THE TOWER", desc: "âš¡ çªç„¶ã®å¤‰åŒ–ã«ã³ã£ãã‚Šã—ã¦ã‚‚å¤§ä¸ˆå¤«\nå¿…è¦ãªã„ã‚‚ã®ãŒå£Šã‚Œã¦ã‚‹ã ã‘ã€‚", img: "images/16.png" },
            { name: "17. THE STAR", desc: "ğŸŒŸ å¸Œæœ›ã¯ã¡ã‚ƒã‚“ã¨æ®‹ã£ã¦ã‚‹\nä¿¡ã˜ã‚‹æ°—æŒã¡ãŒã€æœªæ¥ã‚’ç…§ã‚‰ã™ã‚ˆã€‚", img: "images/17.png" },
            { name: "18. THE MOON", desc: "ğŸŒ« æ°—æŒã¡ãŒæºã‚Œã‚„ã™ã„æ™‚\nç„¡ç†ã«ç­”ãˆã‚’å‡ºã•ãªãã¦ã„ã„ã‚ˆã€‚", img: "images/18.png" },
            { name: "19. THE SUN", desc: "â˜€ æœ€é«˜ã«ãƒãƒƒãƒ”ãƒ¼ãªæµã‚Œ\nç¬‘é¡”ã§ã„ã‚‹ã ã‘ã§é‹æ°—ã‚¢ãƒƒãƒ—ï¼", img: "images/19.png" },
            { name: "20. JUDGEMENT", desc: "ğŸº ç›®è¦šã‚ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°\néå»ã‚’è¶…ãˆã¦ã€æ–°ã—ã„è‡ªåˆ†ã¸ã€‚", img: "images/20.png" },
            { name: "21. THE WORLD", desc: "ğŸŒˆ é¡˜ã„ãŒã²ã¨ã¤å®Œæˆã™ã‚‹\nã“ã“ã¾ã§æœ¬å½“ã«ã‚ˆãé ‘å¼µã£ãŸã­ã€‚", img: "images/21.png" },
            { name: "ACE OF WANDS", desc: "ğŸ”¥ WANDS\nâœ¨ æ–°ã—ã„ã‚„ã‚‹æ°—ãŒèŠ½ç”Ÿãˆã‚‹ã‚ˆã€‚ä»ŠãŒã‚¹ã‚¿ãƒ¼ãƒˆï¼", img: "images/22.png" },
            { name: "TWO OF WANDS", desc: "ğŸ”¥ WANDS\nğŸŒˆ æœªæ¥ã®é¸æŠè‚¢ãŒåºƒãŒã£ã¦ã‚‹ã€‚ã©ã£ã¡ã‚‚ç´ æ•µã€‚", img: "images/23.png" },
            { name: "THREE OF WANDS", desc: "ğŸ”¥ WANDS\nğŸš¢ æœŸå¾…ã—ã¦å¾…ã£ã¦ã¦. ã¡ã‚ƒã‚“ã¨é€²å±•ãŒã‚ã‚‹ã‚ˆã€‚", img: "images/24.png" },
            { name: "FOUR OF WANDS", desc: "ğŸ”¥ WANDS\nğŸ¡ å®‰å¿ƒã§ãã‚‹å ´æ‰€ã§ã€å¬‰ã—ã„å‡ºæ¥äº‹ãŒã‚ã‚Šãã†ã€‚", img: "images/25.png" },
            { name: "FIVE OF WANDS", desc: "ğŸ”¥ WANDS\nğŸ’¥ ã¡ã‚‡ã£ã¨ã—ãŸã¶ã¤ã‹ã‚Šåˆã„ã€‚æ·±åˆ»ã˜ã‚ƒãªã„ã‚ˆã€‚", img: "images/26.png" },
            { name: "SIX OF WANDS", desc: "ğŸ”¥ WANDS\nğŸ† é ‘å¼µã‚ŠãŒèªã‚ã‚‰ã‚Œã‚‹æ™‚. è‡ªä¿¡æŒã£ã¦ï¼", img: "images/27.png" },
            { name: "SEVEN OF WANDS", desc: "ğŸ”¥ WANDS\nğŸ›¡ è‡ªåˆ†ã‚’å®ˆã£ã¦OKã€‚ã‚ãªãŸã¯é–“é•ã£ã¦ãªã„ã€‚", img: "images/28.png" },
            { name: "EIGHT OF WANDS", desc: "ğŸ”¥ WANDS\nğŸ’Œ æ€¥å±•é–‹ã®äºˆæ„Ÿï¼é€£çµ¡ã‚„é€²å±•ãŒæ—©ã„ã‚ˆã€‚", img: "images/29.png" },
            { name: "NINE OF WANDS", desc: "ğŸ”¥ WANDS\nğŸ’ª ã‚‚ã†å°‘ã—ã§ã‚´ãƒ¼ãƒ«ã€‚è¸ã‚“å¼µã‚Šã©ãã€‚", img: "images/30.png" },
            { name: "TEN OF WANDS", desc: "ğŸ”¥ WANDS\nğŸ’ æŠ±ãˆã™ãã¦ã‚‹ã‹ã‚‚ã€‚å°‘ã—æ‰‹æ”¾ã—ã¦ã­ã€‚", img: "images/31.png" },
            { name: "PAGE OF WANDS", desc: "ğŸ”¥ WANDS\nğŸŒ± ãƒ¯ã‚¯ãƒ¯ã‚¯ã™ã‚‹ãŠçŸ¥ã‚‰ã›ã€‚å¥½å¥‡å¿ƒã‚’å¤§åˆ‡ã«ã€‚", img: "images/32.png" },
            { name: "KNIGHT OF WANDS", desc: "ğŸ”¥ WANDS\nğŸ”¥ å‹¢ã„é‡è¦–ã§OKï¼è¡Œå‹•ãŒãƒãƒ£ãƒ³ã‚¹ã‚’å‘¼ã¶ã€‚", img: "images/33.png" },
            { name: "QUEEN OF WANDS", desc: "ğŸ”¥ WANDS\nğŸ‘‘ è‡ªåˆ†ã‚‰ã—ãè¼ã‘ã‚‹æ™‚ã€‚é­…åŠ›ãŒã‚¢ãƒƒãƒ—ä¸­ã€‚", img: "images/34.png" },
            { name: "KING OF WANDS", desc: "ğŸ”¥ WANDS\nğŸ¦ ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ç™ºæ®ï¼å ‚ã€…ã¨ã—ã¦å¤§ä¸ˆå¤«ã€‚", img: "images/35.png" },
            { name: "ACE OF CUPS", desc: "ğŸ’§ CUPS\nğŸ’– æ–°ã—ã„æ„›ãŒå§‹ã¾ã‚‹äºˆæ„Ÿã€‚å¿ƒãŒã¨ãã‚ãã‚ˆã€‚", img: "images/36.png" },
            { name: "TWO OF CUPS", desc: "ğŸ’§ CUPS\nğŸ’• æƒ³ã„ãŒé€šã˜åˆã†ã€‚ä¸¡æƒ³ã„ã®ã‚«ãƒ¼ãƒ‰ã€‚", img: "images/37.png" },
            { name: "THREE OF CUPS", desc: "ğŸ’§ CUPS\nğŸ‰ å¬‰ã—ã„ã“ã¨ã‚’ã¿ã‚“ãªã§ã‚·ã‚§ã‚¢ã§ããã†ã€‚", img: "images/38.png" },
            { name: "FOUR OF CUPS", desc: "ğŸ’§ CUPS\nğŸ˜Œ ã¡ã‚‡ã£ã¨æ°—æŒã¡ãŒåœæ»ä¸­ã€‚ç„¡ç†ã—ãªã„ã§ã€‚", img: "images/39.png" },
            { name: "FIVE OF CUPS", desc: "ğŸ’§ CUPS\nğŸ’§ è½ã¡è¾¼ã‚“ã§ã‚‚å¤§ä¸ˆå¤«ã€‚ã¾ã å¸Œæœ›ã¯ã‚ã‚‹ã‚ˆã€‚", img: "images/40.png" },
            { name: "SIX OF CUPS", desc: "ğŸ’§ CUPS\nğŸ§¸ æ‡ã‹ã—ã„æ°—æŒã¡ã€‚å„ªã—ã„å†ä¼šã®äºˆæ„Ÿã€‚", img: "images/41.png" },
            { name: "SEVEN OF CUPS", desc: "ğŸ’§ CUPS\nğŸŒ« è¿·ã„ã‚„ã™ã„æ™‚ã€‚ä»Šã¯æ±ºã‚ãªãã¦OKã€‚", img: "images/42.png" },
            { name: "EIGHT OF CUPS", desc: "ğŸ’§ CUPS\nğŸš¶â€â™€ï¸ æ¬¡ã®å¹¸ã›ã¸é€²ã‚€æº–å‚™ãŒã§ãã¦ã‚‹ã€‚", img: "images/43.png" },
            { name: "NINE OF CUPS", desc: "ğŸ’§ CUPS\nğŸ° é¡˜ã„ãŒå¶ã„ã‚„ã™ã„ï¼æº€è¶³æ„ŸãŸã£ã·ã‚Šã€‚", img: "images/44.png" },
            { name: "TEN OF CUPS", desc: "ğŸ’§ CUPS\nğŸŒˆ å¿ƒã‹ã‚‰ã®å¹¸ã›ã€‚æ„›ã«æº€ãŸã•ã‚Œã‚‹ã‚ˆã€‚", img: "images/45.png" },
            { name: "PAGE OF CUPS", desc: "ğŸ’§ CUPS\nğŸ’Œ å¯æ„›ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€‚ã¨ãã‚ãã®äºˆæ„Ÿã€‚", img: "images/46.png" },
            { name: "KNIGHT OF CUPS", desc: "ğŸ’§ CUPS\nğŸŒ¹ ãƒ­ãƒãƒ³ãƒãƒƒã‚¯ãªå±•é–‹. å„ªã—ã„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã€‚", img: "images/47.png" },
            { name: "QUEEN OF CUPS", desc: "ğŸ’§ CUPS\nğŸ«¶ æ„›æƒ…æ·±ããªã‚Œã‚‹æ™‚ã€‚æ€ã„ã‚„ã‚ŠãŒéµã€‚", img: "images/48.png" },
            { name: "KING OF CUPS", desc: "ğŸ’§ CUPS\nğŸŒŠ æ„Ÿæƒ…ã‚’ä¸Šæ‰‹ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã€‚", img: "images/49.png" },
            { name: "ACE OF SWORDS", desc: "ğŸŒ¬ SWORDS\nğŸ’¡ ã¯ã£ãã‚Šã—ãŸç­”ãˆãŒå‡ºã‚‹ã‚ˆã€‚", img: "images/50.png" },
            { name: "TWO OF SWORDS", desc: "ğŸŒ¬ SWORDS\nğŸ™ˆ æ±ºæ–­ã‚’å…ˆå»¶ã°ã—ä¸­ã€‚å¿ƒã®æº–å‚™å¾…ã¡ã€‚", img: "images/51.png" },
            { name: "THREE OF SWORDS", desc: "ğŸŒ¬ SWORDS\nğŸ’” å‚·ã¤ã„ãŸå¿ƒã€‚ã¡ã‚ƒã‚“ã¨ç™’ãˆã‚‹ã‹ã‚‰ã­ã€‚", img: "images/52.png" },
            { name: "FOUR OF SWORDS", desc: "ğŸŒ¬ SWORDS\nğŸ˜´ ä¼‘æ¯ãŒå¿…è¦ã€‚ç„¡ç†ã—ãªã„ã§ã€‚", img: "images/53.png" },
            { name: "FIVE OF SWORDS", desc: "ğŸŒ¬ SWORDS\nâš  ã¡ã‚‡ã£ã¨å¾Œå‘³æ‚ªã‚ã€‚æ·±å…¥ã‚Šæ³¨æ„ã€‚", img: "images/54.png" },
            { name: "SIX OF SWORDS", desc: "ğŸŒ¬ SWORDS\nğŸš¤ å°‘ã—ãšã¤æ¥½ã«ãªã‚‹ã€‚å¿ƒãŒè»½ããªã‚‹ã‚ˆã€‚", img: "images/55.png" },
            { name: "SEVEN OF SWORDS", desc: "ğŸŒ¬ SWORDS\nğŸ¦Š éš ã—äº‹ã«æ³¨æ„ã€‚é•å’Œæ„Ÿã‚’å¤§åˆ‡ã«ã€‚", img: "images/56.png" },
            { name: "EIGHT OF SWORDS", desc: "ğŸŒ¬ SWORDS\nğŸ•¸ å‹•ã‘ãªã„æ°—ãŒã—ã¦ã‚‹ã ã‘ã€‚æœ¬å½“ã¯è‡ªç”±ã€‚", img: "images/57.png" },
            { name: "NINE OF SWORDS", desc: "ğŸŒ¬ SWORDS\nğŸŒ™ ä¸å®‰ã§ã„ã£ã±ã„ã€‚ã§ã‚‚è€ƒãˆã™ãã ã‚ˆã€‚", img: "images/58.png" },
            { name: "TEN OF SWORDS", desc: "ğŸŒ¬ SWORDS\nğŸŒ… ã“ã‚Œã§çµ‚ã‚ã‚Šã€‚ã“ã“ã‹ã‚‰å›å¾©ã€‚", img: "images/59.png" },
            { name: "PAGE OF SWORDS", desc: "ğŸŒ¬ SWORDS\nğŸ‘€ æ°—ã«ãªã‚‹æƒ…å ±ã€‚æ§˜å­è¦‹ã§OKã€‚", img: "images/60.png" },
            { name: "KNIGHT OF SWORDS", desc: "ğŸŒ¬ SWORDS\nğŸ’¨ å‹¢ã„æ³¨æ„ï¼ä¸€åº¦æ·±å‘¼å¸ã€‚", img: "images/61.png" },
            { name: "QUEEN OF SWORDS", desc: "ğŸŒ¬ SWORDS\nâ„ å†·é™ãªåˆ¤æ–­ãŒã§ãã‚‹æ™‚ã€‚", img: "images/62.png" },
            { name: "KING OF SWORDS", desc: "ğŸŒ¬ SWORDS\nğŸ§  è«–ç†çš„ã«è€ƒãˆã‚‹ã¨æ­£è§£ãŒå‡ºã‚‹ã€‚", img: "images/63.png" },
            { name: "ACE OF PENTACLES", desc: "ğŸŒ± PENTACLES\nğŸŒŸ æ–°ã—ã„ãƒãƒ£ãƒ³ã‚¹ã€‚ç¾å®Ÿçš„ãªå¹¸é‹ã€‚", img: "images/64.png" },
            { name: "TWO OF PENTACLES", desc: "ğŸŒ± PENTACLES\nğŸ”„ å¿™ã—ã„ã‘ã©å›ã›ã¦ã‚‹ã€‚å¤§ä¸ˆå¤«ã€‚", img: "images/65.png" },
            { name: "THREE OF PENTACLES", desc: "ğŸŒ± PENTACLES\nğŸ¤ å”åŠ›ã™ã‚‹ã¨æˆåŠŸã™ã‚‹ã‚ˆã€‚", img: "images/66.png" },
            { name: "FOUR OF PENTACLES", desc: "ğŸŒ± PENTACLES\nğŸ”’ å®ˆã‚Šã™ãæ³¨æ„ã€‚å°‘ã—ç·©ã‚ã¦ã€‚", img: "images/67.png" },
            { name: "FIVE OF PENTACLES", desc: "ğŸŒ± PENTACLES\nâ„ å¿ƒç´°ã•ã‚’æ„Ÿã˜ã‚„ã™ã„æ™‚ã€‚åŠ©ã‘ã¯ã‚ã‚‹ã‚ˆã€‚", img: "images/68.png" },
            { name: "SIX OF PENTACLES", desc: "ğŸŒ± PENTACLES\nğŸ ä¸ãˆã‚‹ãƒ»å—ã‘å–ã‚‹ãƒãƒ©ãƒ³ã‚¹â—", img: "images/69.png" },
            { name: "SEVEN OF PENTACLES", desc: "ğŸŒ± PENTACLES\nğŸŒ³ çµæœå¾…ã¡ã€‚ç„¦ã‚‰ãªãã¦OKã€‚", img: "images/70.png" },
            { name: "EIGHT OF PENTACLES", desc: "ğŸŒ± PENTACLES\nğŸ“š ã‚³ãƒ„ã‚³ãƒ„åŠªåŠ›ãŒå®Ÿã‚‹ã€‚", img: "images/71.png" },
            { name: "NINE OF PENTACLES", desc: "ğŸŒ± PENTACLES\nğŸ’ è‡ªç«‹ã¨æº€è¶³ã€‚è‡ªåˆ†ã‚’è¤’ã‚ã¦ã€‚", img: "images/72.png" },
            { name: "TEN OF PENTACLES", desc: "ğŸŒ± PENTACLES\nğŸ° å®‰å®šã¨è±Šã‹ã•ã€‚é•·ãç¶šãå¹¸ã›ã€‚", img: "images/73.png" },
            { name: "PAGE OF PENTACLES", desc: "ğŸŒ± PENTACLES\nğŸŒ± æ–°ã—ã„å­¦ã³ã‚„æŒ‘æˆ¦ã€‚", img: "images/74.png" },
            { name: "KNIGHT OF PENTACLES", desc: "ğŸŒ± PENTACLES\nğŸ¢ ã‚†ã£ãã‚Šã§ã‚‚ç¢ºå®Ÿã«é€²ã‚€ã€‚", img: "images/75.png" },
            { name: "QUEEN OF PENTACLES", desc: "ğŸŒ± PENTACLES\nğŸŒ¸ å„ªã—ã•ã¨å®‰å¿ƒæ„Ÿã€‚", img: "images/76.png" },
            { name: "KING OF PENTACLES", desc: "ğŸŒ± PENTACLES\nğŸ‘‘ ã—ã£ã‹ã‚Šã—ãŸåŸºç›¤ã€‚ä¿¡é ¼ã§ãã‚‹æœªæ¥ã€‚", img: "images/77.png" },
            { name: "ğŸ¦„ ULTIMATE", desc: "å¬‰ã—ã™ãã‚‹ç©¶æ¥µã®ã‹ãŸã¡ã¸é€²ã‚€ã‚ˆã€‚", img: "images/78.png" }
        ];

        // åˆ¶é™ãƒ­ã‚¸ãƒƒã‚¯
        let playCount = 0;
        const MAX_PLAYS = 3;

        function updateLimitUI() {
            const now = new Date();
            const lastDate = localStorage.getItem('lastPlayDate');
            const todayStr = now.toLocaleDateString();

            if (lastDate !== todayStr) {
                playCount = 0;
                localStorage.setItem('playCount', 0);
                localStorage.setItem('lastPlayDate', todayStr);
            } else {
                playCount = parseInt(localStorage.getItem('playCount') || 0);
            }

            const btn = document.getElementById('play-btn');
            const timerElement = document.getElementById('timer');
            const coinMsg = document.getElementById('coin-message');
            const limitText = document.getElementById('limit-text');

            if (playCount >= MAX_PLAYS) {
                btn.disabled = true;
                limitText.innerText = "æœ¬æ—¥ã®å ã„ã¯çµ‚äº†ã—ãŸã‚ˆğŸŒ™";
                coinMsg.style.display = "block";
                startTimer();
            } else {
                btn.disabled = false;
                limitText.innerText = `ã“ã®ã‚¬ãƒãƒ£ã¯1æ—¥3å›ã¾ã§å¼•ã‘ã‚‹ã‚ˆğŸ¦„âœ¨ (ã‚ã¨${MAX_PLAYS - playCount}å›)`;
                timerElement.innerText = "";
                coinMsg.style.display = "none";
            }
        }

        function startTimer() {
            function updateTimer() {
                const now = new Date();
                const nextReset = new Date();
                nextReset.setHours(24, 0, 0, 0); 
                const diff = nextReset - now;
                if (diff <= 0) { updateLimitUI(); return; }
                const h = Math.floor(diff / 1000 / 60 / 60);
                const m = Math.floor(diff / 1000 / 60) % 60;
                const s = Math.floor(diff / 1000) % 60;
                document.getElementById('timer').innerText = `æ¬¡å›ã¾ã§ï¼š${h}æ™‚é–“${m}åˆ†${s}ç§’`;
            }
            updateTimer();
            setInterval(updateTimer, 1000);
        }

        function playGacha() {
            if (playCount >= MAX_PLAYS) return;
            const btn = document.getElementById('play-btn');
            const capsule = document.getElementById('capsule');
            const machine = document.getElementById('gacha-machine');
            btn.disabled = true;
            playCount++;
            localStorage.setItem('playCount', playCount);

            const ballColors = [
                'radial-gradient(circle at 30% 30%, #ff9999, #cc0000)',
                'radial-gradient(circle at 30% 30%, #99ccff, #0033cc)',
                'radial-gradient(circle at 30% 30%, #ffff99, #ffcc00)',
                'radial-gradient(circle at 30% 30%, #cc99ff, #6600cc)',
                'radial-gradient(circle at 30% 30%, #99ff99, #009900)'
            ];
            capsule.style.background = ballColors[Math.floor(Math.random() * ballColors.length)];
            machine.style.animation = "shake 0.1s infinite";
            
            setTimeout(() => { machine.style.animation = "none"; }, 800);
            setTimeout(() => {
                capsule.style.display = "block";
                capsule.classList.add('pop-out');
            }, 600);
            setTimeout(() => { showResult(); updateLimitUI(); }, 2100);
        }

        function showResult() {
            const result = tarotData[Math.floor(Math.random() * tarotData.length)];
            const overlay = document.getElementById('result-overlay');
            const cardBox = document.getElementById('card-box');
            cardBox.innerHTML = `<img src="${result.img}" style="width:100%; height:100%; object-fit:cover;">`;
            document.getElementById('card-name').innerText = result.name;
            document.getElementById('card-desc').innerText = result.desc;
            overlay.style.display = "flex";
        }

        function closeResult() {
            document.getElementById('result-overlay').style.display = "none";
            const capsule = document.getElementById('capsule');
            capsule.style.display = "none";
            capsule.classList.remove('pop-out');
            updateLimitUI();
        }

        window.onload = updateLimitUI;
    </script>
</body>
</html>
